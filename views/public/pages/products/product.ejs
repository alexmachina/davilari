<% include ../../templates/header.ejs %>
<div class="container-fluid no-padding">
  <div class="row no-padding">
    <div class="c-product no-padding col-xs-12">

      <!-- VISIBLE XS -->
      <div class="visible-xs">
        <!-- CAROUSEL -->
        <div id="image-carousel" class="carousel slide" data-ride="carousel">
          <div class="carousel-inner" role="listbox">
            <div class="item active col-xs-12">
              <img class="carousel-image img img-responsive"
                   src="/resources/img/products/<%= product.mainImage %>" />
            </div>
            <% for (var i = 0; i < product.images.length; i++) { %>
            <div class="item col-xs-12">
              <img class="carousel-image img img-responsive"
                   src="/resources/img/products/<%= product.images[i] %>" />
            </div>
            
            <% } %>
          </div>

          <!-- AROWS -->

          <div class="carousel-images-arrows">
            <a class="left carousel-control black"
              href="#image-carousel" role="button" data-slide="prev">
              <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="right carousel-control black" 
              href="#image-carousel" role="button" data-slide="next">
              <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
          </div>
        </div>

        <!-- PRODUCT DESCRIPTION -->
        <div class="col-xs-12 product-description-xs">
        <h1 class="text-center"><%= product.name %></h1>
        <p><%= product.description %></p>
        <h3 class="price-xs">R$<%= product.price %>,00</span>
<h4>ou 12x de R$<%= (product.price/12).toFixed(0) %>,00 no cartão </h4>

        </div>
        <!-- ORCAMENTO -->
        <div class="col-xs-12">
          <button  data-target="#orcamento-modal" data-toggle="modal" 
            type="button" id="add-orcamento" data-idProduct="<%= product.IdProduct %>" class="add-xs form-control btn btn-success">Adicionar ao Orçamento</button>
        </div>

        
        
      </div>

      <!-- HIDDEN XS -->
      <div class="col-xs-12 hidden-xs c-product">
        <h1 class="text-center hidden-lg"><%= product.name %></h1>
        <!-- PAINEL DE IMAGENS -->
        <div id="panel-images" class="col-lg-7">
          <div id="c-main-image" class="col-sm-9">
            <img id="displayed-image" src="/resources/img/products/<%= product.mainImage %>" class="img img-responsive" />
          </div>
          <div id="c-panel-images" class="col-sm-3">
            <!-- Main Image at panel -->
            <div class="panel-image col-sm-12 no-padding">
              <img class="img img-responsive panel-side-image"
                   src="/resources/img/products/<%= product.mainImage %>" />
            </div>

            <!-- Product images at panel -->
            <% for (var i = 0; i < product.images.length; i++) {
                   if (i == 3) break; //Perdoa eu deus.
               var image = product.images[i]; %>

            <div class="panel-image col-sm-12 no-padding">
              <img class="img img-responsive panel-side-image"
                   src="/resources/img/products/<%= image %>" />
            </div>
            <% } %>
          </div>
        </div>

        <!-- PRODUCT INFO -->
        <div class="col-sm-12 col-lg-5 c-product-info">
          <h1 class="p-title visible-lg text-center"><%= product.name %></h1>
          <div class="c-description">
            <p><%= product.description %></p>
          </div>
          <div class="col-sm-12 c-price">

          <h2>R$<%= product.price %>,00</h2>
          <div class="discount">
            <h4>ou 12x de R$<%= (product.price/12).toFixed(0) %>,00 no cartão </h4>
          </div>
          </div>
 <div class="text-center col-sm-12 c-button-orcamento">

   <button data-target="#orcamento-modal" data-toggle="modal" id="add-orcamento" data-IdProduct="<%= product.IdProduct %>" class="btn btn-success">Adicionar ao Orçamento</button>
        </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="orcamento-modal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">
          <span>&times</span>
        </button>
        <h4 class="modal-title">Adicionar ao Orçamento</h4>
      </div>
      <div class="modal-body">
        <h3>Produto: </h3>
        <label for="quantity">Quantidade:</label>
        <input type="text" name="quantity" id="quantity-field" value="1" size="2" maxlength="2"></input>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" data-id="<%= product.IdProduct %>" 
          data-name="<%= product.name %>" id="btn-post-item" data-dismiss="modal"  class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>
<% include ../../templates/footer.ejs %>
